function initWindowEvent(i){i.addEventListener("focus",function(){hideBar(i);var e=createPlaceView();Ti.App.Properties.setObject("pop",e)})}function hideBar(i){var e=i.activity.actionBar;"undefined"!=typeof e&&e.hide()}function initWindow(){return Ti.UI.createWindow()}function initMapsfirgeModule(){return require("ti.mapsforge")}function initMapsforge(i,e){var t=Ti.App.Properties.getDouble("gps_lng",0),n=Ti.App.Properties.getDouble("gps_lat",0),a=e.createMapsforgeView({scalebar:!0,minZoom:5,maxZoom:20,centerLatlng:[n,t],zoomLevel:16,debug:!1});return i.add(a),i.open(),a}function move(i){map.centerLatlng=i}function animateTo(i){map.animateTo(i)}function addOfflineMapLayer(i){i.addLayer({name:"osm",path:Ti.App.id+"/map/nz.map"})}function initMapListener(i,e,t){Ti.App.addEventListener("viewCreated",function(){Ti.API.info("mapCreated: received by js"),addOfflineMapLayer(t),addActionListeners(e,t),initGPS(),showAllSavedPlaceMarkers()})}function addMarker(i,e,t){var n=i.createMarker({iconPath:t,latlng:e});return n.id}function removeLayer(i){map.removeLayer(i)}initVars();var win=initWindow();initWindowEvent(win);var mf=initMapsfirgeModule(),map=initMapsforge(win,mf);initMapListener(win,mf,map),initNav(mf),appEventListeners(),createAndroidSearchBar(),createSavedPlaceTable();