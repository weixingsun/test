function initWindow(){return Ti.UI.createWindow()}function initWindowEvent(e){e.addEventListener("focus",function(){hideBar(e);createPlaceView()})}function hideBar(e){var i=e.activity.actionBar;"undefined"!=typeof i&&i.hide()}function initGoogleModule(){return require("ti.map")}function initGraphhopperModule(){return require("ti.mapsforge")}function initGoogleMap(e,i){var t=Ti.App.Properties.getDouble("gps_lng",0),a=Ti.App.Properties.getDouble("gps_lat",0),n=i.createView({userLocation:!0,mapType:i.NORMAL_TYPE,region:{latitude:a,longitude:t,latitudeDelta:.1,longitudeDelta:.1},height:"100%",width:"100%",top:0,left:0});return addGmapActionListeners(n),e.add(n),e.open(),n}function addGmapActionListeners(e){e.addEventListener("click",function(e){var i=e.longitude,t=e.latitude;Ti.API.info("map.clicked:"+t+","+i)}),e.addEventListener("longclick",function(i){removeMyGoogleMarker("dest");var t=[i.latitude,i.longitude],a=getCurrentPos();addMyGoogleMarker("dest",t[0],t[1],Ti.App.Android.R.drawable.marker_tap,!1),navi(graph,e,a,t)}),e.addEventListener("complete",function(){Ti.API.info("map load complete")})}function addMyGoogleMarker(e,i,t,a,n){{var o={latitude:i,longitude:t,id:e,image:a,draggable:n};map.addMarker(o)}}function removeMyGoogleMarker(e){map.removeMarker(e)}function addMyGooglePolyline(e){map.addPolyline(e)}function removeMyGooglePolyline(e){map.removePolyline(e)}function move(e){map.updateCamera({latitude:e[0],longitude:e[1]})}function animateTo(e){map.updateCamera({latitude:e[0],longitude:e[1],animate:!0})}var map_type="google.normal";initVars(map_type);var win=initWindow();initWindowEvent(win);var module=initGoogleModule(),graph=initGraphhopperModule(),map=initGoogleMap(win,module);initNav(graph);