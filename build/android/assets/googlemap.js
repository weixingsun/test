function initWindow(){return Ti.UI.createWindow()}function initWindowEvent(e){e.addEventListener("focus",function(){hideBar(e);createPlaceView()})}function hideBar(e){var i=e.activity.actionBar;"undefined"!=typeof i&&i.hide()}function initGoogleModule(){return require("ti.map")}function initGraphhopperModule(){return require("ti.mapsforge")}function initGoogleMap(e,i){var t=Ti.App.Properties.getDouble("gps_lng",0),a=Ti.App.Properties.getDouble("gps_lat",0),n=i.createView({userLocation:!0,mapType:i.NORMAL_TYPE,region:{latitude:a,longitude:t,latitudeDelta:.1,longitudeDelta:.1},height:"100%",width:"100%",top:0,left:0});return addGmapActionListeners(n),e.add(n),e.open(),n}function addGmapActionListeners(e){e.addEventListener("click",function(e){var i=[e.latitude,e.longitude],t=findSavedMarker(i);null!==t&&changeDestination(t.latlng),hideSuggestList(),hideKeyboard()}),e.addEventListener("longclick",function(e){var i=[e.latitude,e.longitude];changeDestination(i)}),e.addEventListener("complete",function(){Ti.API.info("map load complete"),createAndroidSearchBar(),showAllSavedPlaceMarkers()})}function addMyGoogleMarker(e,i,t,a,n){var o={latitude:i,longitude:t,id:e,image:a,draggable:n};return map.addMarker(o),e}function removeMyGoogleMarker(e){map.removeMarker(e)}function addMyGooglePolyline(e){map.addPolyline(e)}function removeMyGooglePolyline(e){map.removePolyline(e)}function animateTo(e){var i=map.getRegion();i.latitude=e[0],i.longitude=e[1],Ti.API.info("delta="+i.latitudeDelta+","+i.longitudeDelta),map.setLocation(i)}function setTraffic(e){map.setTrafficEnabled(e)}function setGoogleMapType(e){map.setMapType(e)}function getFitZoomMapRegionWithCoords(e){for(var i=-90,t=180,a=90,n=-180,o=0;o<e.length;o++){var l=e[o];t=Math.min(t,parseFloat(l.longitude)),i=Math.max(i,parseFloat(l.latitude)),n=Math.max(n,parseFloat(l.longitude)),a=Math.min(a,parseFloat(l.latitude))}var r=i-.5*(i-a),u=t+.5*(n-t),d=1.1*Math.abs(i-a),s=1.1*Math.abs(n-t);0==d&&0==s&&(d=s=.01);var p={latitude:r,longitude:u,latitudeDelta:d,longitudeDelta:s};return p}var map_type="google.normal";initVars(map_type);var win=initWindow();initWindowEvent(win);var mapmodule=initGoogleModule(),navimodule=initGraphhopperModule(),map=initGoogleMap(win,mapmodule);initNav(navimodule),initGPS(),createSavedPlaceTable();