function initWindow(){return Ti.UI.createWindow()}function initWindowEvent(i){i.addEventListener("focus",function(){hideBar(i);createPlaceView()})}function hideBar(i){var e=i.activity.actionBar;"undefined"!=typeof e&&e.hide()}function initGoogleModule(){return require("ti.map")}function initGraphhopperModule(){return require("ti.mapsforge")}function initGoogleMap(i,e){var t=Ti.App.Properties.getDouble("gps_lng",0),a=Ti.App.Properties.getDouble("gps_lat",0),n=e.createView({userLocation:!0,mapType:e.NORMAL_TYPE,region:{latitude:a,longitude:t,latitudeDelta:.1,longitudeDelta:.1},height:"100%",width:"100%",top:0,left:0});return addGmapActionListeners(n),i.add(n),i.open(),n}function addGmapActionListeners(i){i.addEventListener("click",function(i){var e=i.longitude,t=i.latitude;Ti.API.info("map.clicked:"+t+","+e)}),i.addEventListener("longclick",function(i){var e=[i.latitude,i.longitude];changeDestination(e)}),i.addEventListener("complete",function(){Ti.API.info("map load complete"),createAndroidSearchBar()})}function addMyGoogleMarker(i,e,t,a,n){{var o={latitude:e,longitude:t,id:i,image:a,draggable:n};map.addMarker(o)}return 0}function removeMyGoogleMarker(i){map.removeMarker(i)}function addMyGooglePolyline(i){map.addPolyline(i)}function removeMyGooglePolyline(i){map.removePolyline(i)}function move(i){map.setLocation({latitude:i[0],longitude:i[1]})}function animateTo(i){var e=map.getRegion();e.latitude=i[0],e.longitude=i[1],map.setLocation(e)}function setTraffic(i){map.setTrafficEnabled(i)}function setGoogleMapType(i){map.setMapType(i)}function getFitZoomMapRegionWithCoords(i){for(var e=-90,t=180,a=90,n=-180,o=0;o<i.length;o++){var l=i[o];t=Math.min(t,parseFloat(l.longitude)),e=Math.max(e,parseFloat(l.latitude)),n=Math.max(n,parseFloat(l.longitude)),a=Math.min(a,parseFloat(l.latitude))}var r=e-.5*(e-a),u=t+.5*(n-t),d=1.1*Math.abs(e-a),p=1.1*Math.abs(n-t);0==d&&0==p&&(d=p=.01);var s={latitude:r,longitude:u,latitudeDelta:d,longitudeDelta:p};return s}var map_type="google.normal";initVars(map_type);var win=initWindow();initWindowEvent(win);var mapmodule=initGoogleModule(),navimodule=initGraphhopperModule(),map=initGoogleMap(win,mapmodule);initNav(navimodule),initGPS();