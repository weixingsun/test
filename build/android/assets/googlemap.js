function GoogleMap(){this.mapmodule=require("ti.map"),this.navimodule=require("ti.mapsforge"),this.type=0}GoogleMap.prototype=new Map,GoogleMap.prototype.init=function(){var e=Ti.App.Properties.getDouble("gps_lng",0),i=Ti.App.Properties.getDouble("gps_lat",0);this.mapView=this.mapmodule.createView({userLocation:!0,mapType:this.mapmodule.NORMAL_TYPE,region:{latitude:i,longitude:e,latitudeDelta:.1,longitudeDelta:.1},height:"100%",width:"100%",top:0,left:0}),this.addGmapActionListeners(),this.win.add(this.mapView),this.win.open(),this.win.addEventListener("focus",function(){views.createPlaceView(),views.createSearchList(),views.hideBar()}),this.initNav()},GoogleMap.prototype.addGmapActionListeners=function(){var e=this;this.mapView.addEventListener("click",function(i){var t=[i.latitude,i.longitude],a=i.markerId;null!=a&&e.changeDestination(t),views.hideKeyboard(),views.hideSearchList()}),this.mapView.addEventListener("longclick",function(i){var t=[i.latitude,i.longitude];e.changeDestination(t)}),this.mapView.addEventListener("complete",function(i){Ti.API.info("map load complete"),views.createAndroidSearchBar(),e.initGPS(),places.showAllSavedPlaceMarkers(),places.createSavedPlaceTable()})},GoogleMap.prototype.changeDestination=function(e){views.hidePopView(),this.destination=e,0!==this.dest_marker&&this.mapView.removeMarker(this.dest_marker);var i=Ti.App.Android.R.drawable.marker_tap_long;this.addMarkerName("dest_marker",e,i),this.dest_marker="dest_marker",views.showPopView(e)},GoogleMap.prototype.addMarker=function(e,i){var t=e[0]+","+e[1];return this.addMarkerName(t,e,i),t},GoogleMap.prototype.addMarkerName=function(e,i,t){var a={latitude:i[0],longitude:i[1],id:e,image:t,draggable:!1};return this.mapView.addMarker(a),e},GoogleMap.prototype.removeMarker=function(e){this.mapView.removeMarker(e)},GoogleMap.prototype.removePolyline=function(e){this.mapView.removePolyline(e)},GoogleMap.prototype.addPolyline=function(e,i,t){var a={id:"route",points:e,color:i,width:t};return this.mapView.addPolyline(a),"route"},GoogleMap.prototype.animateTo=function(e){var i=this.mapView.getRegion();i.latitude=e[0],i.longitude=e[1],this.mapView.setLocation(i)},GoogleMap.prototype.setTraffic=function(e){this.mapView.setTrafficEnabled(e)},GoogleMap.prototype.setGoogleMapType=function(e){this.mapView.setMapType(e)};