function handleLocation(e){if(!e.error){ALL.Gps.lng=e.coords.longitude,ALL.Gps.lat=e.coords.latitude,ALL.Gps.heading=e.coords.heading,ALL.Gps.accuracy=e.coords.accuracy,ALL.Gps.speed=e.coords.speed,0!==ALL.Marker.me&&map.removeLayer(ALL.Marker.me);var n=map.createCircle({latlng:[e.coords.latitude,e.coords.longitude],colorHex:"#440000FF",radius:e.coords.accuracy});ALL.Marker.me=n.id}}function addHandler(){locationAdded||(Ti.API.info("setup gps handler 2"),Ti.Geolocation.addEventListener("location",handleLocation),locationAdded=!0)}function removeHandler(){locationAdded&&(Ti.API.info("removeHandler gps"),Ti.Geolocation.removeEventListener("location",handleLocation),locationAdded=!1)}var locationAdded=!1;Ti.Geolocation.accuracy=Ti.Geolocation.ACCURACY_BEST,Ti.Geolocation.distanceFilter=100,Ti.Geolocation.preferredProvider=Ti.Geolocation.PROVIDER_GPS,Ti.Geolocation.locationServicesEnabled?(Ti.API.info("setup gps handler 1"),addHandler()):alert("Please enable location services");