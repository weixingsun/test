function handleLocation(e){e.error||(Ti.API.info("location: "+e.coords.longitude+","+e.coords.latitude+"("+e.coords.accuracy+")   time:"+e.coords.timestamp),ALL.Gps.lng=e.coords.longitude,ALL.Gps.lat=e.coords.latitude,ALL.Gps.heading=e.coords.heading,ALL.Gps.accuracy=e.coords.accuracy,ALL.Gps.speed=e.coords.speed)}function addHandler(){locationAdded||(Ti.Geolocation.addEventListener("location",handleLocation),locationAdded=!0)}function removeHandler(){locationAdded&&(Ti.Geolocation.removeEventListener("location",handleLocation),locationAdded=!1)}var locationAdded=!1;if(Ti.Geolocation.accuracy=Ti.Geolocation.ACCURACY_BEST,Ti.Geolocation.preferredProvider=Ti.Geolocation.PROVIDER_GPS,Ti.Geolocation.locationServicesEnabled){addHandler();var activity=Ti.Android.currentActivity;activity.addEventListener("destroy",removeHandler),activity.addEventListener("pause",removeHandler),activity.addEventListener("resume",addHandler)}else alert("Please enable location services");