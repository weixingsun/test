function handleLocation(e){if(!e.error){ALL.Gps.lng=e.coords.longitude,ALL.Gps.lat=e.coords.latitude,ALL.Gps.heading=e.coords.heading,ALL.Gps.accuracy=e.coords.accuracy,ALL.Gps.speed=e.coords.speed,0!==ALL.Marker.myCircle&&(map.removeLayer(ALL.Marker.myCircle),map.removeLayer(ALL.Marker.mySpot));var i=[e.coords.latitude,e.coords.longitude],n=map.createCircle({latlng:i,colorHex:"#440000FF",radius:e.coords.accuracy}),a=map.createMarker({iconPath:Ti.App.Android.R.drawable.spot_blue,latlng:i});ALL.Marker.mySpot=a.id,ALL.Marker.myCircle=n.id}}function addHandler(){locationAdded||(Ti.API.info("setup gps handler 2"),Ti.Geolocation.addEventListener("location",handleLocation),locationAdded=!0)}function removeHandler(){locationAdded&&(Ti.API.info("removeHandler gps"),Ti.Geolocation.removeEventListener("location",handleLocation),locationAdded=!1)}function initGPS(){Ti.Geolocation.accuracy=Ti.Geolocation.ACCURACY_BEST,Ti.Geolocation.distanceFilter=100,Ti.Geolocation.preferredProvider=Ti.Geolocation.PROVIDER_GPS,Ti.Geolocation.locationServicesEnabled?(Ti.API.info("setup gps handler 1"),addHandler()):alert("Please enable location services")}var locationAdded=!1;