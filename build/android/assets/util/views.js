function createSuggestList(e){clearSuggestList(),showSuggestList();{var i=AllViews.searchList;AllViews.searchBar}if("undefined"==typeof i){var t=createSearchListItemTemplate(),i=Ti.UI.createListView({top:"50dp",left:10,width:"80%",templates:{plain:t},defaultItemTemplate:"plain"});i.addEventListener("itemclick",function(e){if("rowtitle"==e.bindId||"pic"==e.bindId){var i=e.section.getItemAt(e.itemIndex);Ti.API.info("clicked :"+JSON.stringify(i)),"undefined"!=typeof i.rowtitle.id&&changeDestination(JSON.parse(i.rowtitle.id)),hideSuggestList()}hideKeyboard()})}for(var r=[],n=Ti.UI.createListSection({headerTitle:"Online",width:Ti.UI.FILL}),a=[],o=0;o<e.length;o++){var s=JSON.parse(e[o].point),d=getCurrentPos(),c=distance(s[0],s[1],d[0],d[1]),l=c>999?(c/1e3).toFixed(1)+" km":c+" m",p={pic:{image:Ti.App.Android.R.drawable.place_32.png},rowtitle:{text:e[o].addr,id:e[o].point,color:"black"},dist:{text:l,color:"gray"},properties:{backgroundColor:"rgba(192,192,192,192)"}};a.push(p)}n.setItems(a),r.push(n),i.sections=r,showSuggestList(),win.add(i),AllViews.searchList=i}function createSearchListItemTemplate(){var e={childTemplates:[{type:"Ti.UI.ImageView",bindId:"pic",properties:{left:"2dp",image:Ti.App.Android.R.drawable.place_32.png}},{type:"Ti.UI.Label",bindId:"rowtitle",properties:{left:"40dp"}},{type:"Ti.UI.Label",bindId:"dist",properties:{right:"10dp"}}]};return e}function clearSuggestList(){var e=AllViews.searchList;"undefined"!=typeof e&&e.removeAllChildren()}function hideSuggestList(){var e=AllViews.searchList;"undefined"!=typeof e&&e.hide()}function showSuggestList(){var e=AllViews.searchList;"undefined"!=typeof e&&e.show()}function hideKeyboard(){var e=AllViews.searchBar;"undefined"!=typeof e&&e.blur()}function createAndroidSearchBar(){var e=Ti.UI.Android.createSearchView({backgroundColor:"rgba(128,128,128,128)",color:"black",width:"80%",top:0,left:10}),i=function(e){Ti.API.info(JSON.stringify(e)),e.source.value.length>1?searchAddressGoogle(e.source.value,"nz"):hideSuggestList()};e.addEventListener("change",i),e.addEventListener("submit",i),AllViews.searchBar=e,win.add(e)}function createIosSearchBar(){var e=Titanium.UI.createSearchBar({width:"80%",showCancel:!0,height:45,top:5,left:10});Ti.API.info("searchbar created"),win.add(e)}