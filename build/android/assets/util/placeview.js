function hidePopView(){var e=AllViews.pop;"undefined"!=typeof e&&e.hide()}function showPopView(e){getLongpressAddress(e[0],e[1],getLongpressAddressCallback);var i=AllViews.pop;"undefined"!=typeof i&&i.show()}function createPlaceView(){var e=Ti.UI.createView({backgroundColor:"rgba(128,128,128,128)",width:"100%",height:"20%",layout:"vertical",id:"pop",bottom:0});return e.visible=!1,createRows(e),win.add(e),AllViews.pop=e,e}function createRows(e){var i=Ti.UI.createView({height:"60%",layout:"horizontal"}),t=Ti.UI.createView({height:"40%",layout:"horizontal"});e.add(i),e.add(t),createTopColumns(i),createBottomColumns(t)}function createTopColumns(e){{var i=Ti.UI.createView({width:"80%"}),t=Ti.UI.createView({width:"20%"}),n=Ti.App.Android.R.drawable.sedan_128;createCarImage(t,n)}createNameLabel(i),e.add(i),e.add(t)}function createNameLabel(e){var i=Ti.App.Properties.getDouble("dest_lat"),t=Ti.App.Properties.getDouble("dest_lng"),n="["+i+","+t+"]",a=Ti.UI.createLabel({color:"#000",font:{fontSize:20},shadowColor:"#aaa",shadowOffset:{x:5,y:5},shadowRadius:3,text:n,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,top:10,left:5,parent:e,width:Ti.UI.SIZE,height:Ti.UI.SIZE});e.add(a),AllViews.place_name=a}function createBottomColumns(e){{var i=Ti.UI.createView({width:"12%"}),t=Ti.UI.createView({width:"10%"}),n=Ti.UI.createView({width:"10%"}),a=(Ti.UI.createView({width:"10%"}),Ti.App.Android.R.drawable.close_64),o=Ti.App.Android.R.drawable.search_64,r=Ti.App.Android.R.drawable.parking_64,d=createImages(i,a);createImages(t,o),createImages(n,r)}d.addEventListener("click",function(e){e.source.parent.parent.parent.hide(),removePrevAll();var i=Ti.App.Properties.getInt("route");0!==i&&map.removeLayer(i),Ti.App.Properties.setInt("MODE",0)}),e.add(i),e.add(t),e.add(n)}function createImages(e,i){var t=Titanium.UI.createImageView({image:i});return e.add(t),t}function createCarImage(e,i){var t=Titanium.UI.createImageView({image:i});return e.add(t),t.addEventListener("click",function(){var e=[Ti.App.Properties.getDouble("gps_lat"),Ti.App.Properties.getDouble("gps_lng")],i=[Ti.App.Properties.getDouble("dest_lat"),Ti.App.Properties.getDouble("dest_lng")];Ti.API.info("mf="+mf+",map="+map+",from="+e+",to="+i),navi(mf,map,e,i)}),t.addEventListener("longclick",function(e){var i=JSON.parse(Ti.App.Properties.getString("bys")),t=Ti.App.Properties.getString("by"),n=i.indexOf(t),a=n==i.length-1?0:n+1,o=i[a];Ti.API.info("nextBy="+o),Ti.App.Properties.setString("by",o);var r=JSON.parse(Ti.App.Properties.getString("by_icons")),d=r[a];e.source.image=d}),AllViews.car_img=t,t}