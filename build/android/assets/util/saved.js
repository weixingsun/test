function findSavedMarker(e){Ti.API.info("findSavedMarker():"+JSON.stringify(e))}function showAllSavedPlaceMarkers(){for(var e=selectAllPlacesDB(),i=[],t=0;t<e.length;t++){var a=[e[t].lat,e[t].lng],r=Ti.App.Android.R.drawable.star_red_24,n=addMarker(map,a,r);i.push(n)}Ti.App.Properties.setString("SavedPlaceMarkers",JSON.stringify(i))}function createSavedPlaceTable(){var e=Ti.Database.open("wx_map");e.execute("CREATE TABLE IF NOT EXISTS saved_places(lat varchar(10), lng varchar(10), name varchar(100));"),e.close()}function selectAllPlacesDB(){for(var e=Ti.Database.open("wx_map"),i=e.execute("select * from saved_places;"),t=[];i.isValidRow();)t.push({lat:i.fieldByName("lat"),lng:i.fieldByName("lng"),name:i.fieldByName("name")}),i.next();return Ti.API.info("selectAllPlacesDB()row#"+i.rowCount),i.close(),e.close(),t}function selectASavedPlace(e){var i=Ti.Database.open("wx_map"),t=JSON.parse(e),a=i.execute("select * from saved_places where lat=? and lng=? ",t),r=[];if(a.rowCount<1)return null;for(;a.isValidRow();)r.push({lat:a.fieldByName("lat"),lng:a.fieldByName("lng"),name:a.fieldByName("name")}),a.next();return a.close(),i.close(),r[0]}function isSavedPlacesDB(e){var i=!1,t=selectASavedPlace(e);return null!==t&&(i=!0),i}function addSavedPlaceDB(e){var i=Ti.Database.open("wx_map"),t=[e.lat,e.lng,e.name];i.execute("insert into saved_places(lat,lng,name) values(?,?,?)",t),i.close(),Ti.API.info("addSavedPlaceDB():"+JSON.stringify(e))}function removeSavedPlaceDB(e){var i=Ti.Database.open("wx_map"),t=[e.lat,e.lng];i.execute("delete from saved_places where lat=? and lng=?",t),i.close(),Ti.API.info("removeSavedPlaceDB():"+JSON.stringify(e))}function getAllSavedPlaces(){var e=Ti.App.Properties.getString("SAVED_PLACES");return Ti.API.info("places="+e),JSON.parse(e)}function saveAllSavedPlaces(e){Ti.App.Properties.setString("SAVED_PLACES",JSON.stringify(e))}function isSavedPlaces(e){var i=getAllSavedPlaces();return e in i}function addSavedPlace(e){var i=getAllSavedPlaces();i.push({latlng:JSON.stringify(e.latlng),name:e.name}),saveAllSavedPlaces(i),Ti.API.info("addSavedPlace():"+JSON.stringify(i))}function removeSavedPlace(e){var i=getAllSavedPlaces();delete i[JSON.stringify(e.latlng)],saveAllSavedPlaces(i),Ti.API.info("removeSavedPlace():"+JSON.stringify(i))}