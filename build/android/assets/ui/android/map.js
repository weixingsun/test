function navi(e,i){var a={weighting:"fastest",vehicle:"car",from:e,to:i,debug:!1};mf.getRouteAsyncCallback(a,function(e){if(0==e.error){var i=all_things_dictionary.PolyLine.route;0!==i&&mapView.removeLayer(i);var a=mapView.createPolyline({latlngs:e.pts,color:"blue",strokeWidth:10});all_things_dictionary.PolyLine.route=a.id,Ti.API.info("test: nodes.size()="+e.nodes.length+",node0.sign="+e.nodes[0].sign+",node0.name="+e.nodes[0].name+",node0.pts="+e.nodes[0].pts),all_things_dictionary.Nodes=e.nodes}})}var win=Ti.UI.createWindow({backgroundColor:"white"}),mf=require("ti.mapsforge");mf.load("/osmdroid/maps/nz/");var mapView=mf.createMapsforgeView({scalebar:!0,minZoom:5,maxZoom:20,centerLatlng:[-43.524551,172.58346],zoomLevel:12,debug:!1});win.add(mapView),win.open(),Ti.API.info("mapView: "+JSON.stringify(mapView)),Ti.App.addEventListener("clicked",function(e){Ti.App.Android.R.drawable.marker_tap;alert("clicked("+e.lat+","+e.lng+")")}),Ti.App.addEventListener("longclicked",function(e){Ti.API.info("longclicked("+e.lat+","+e.lng+")");var i=[-43.524551,172.58346],a=[e.lat,e.lng];navi(i,a);Ti.App.Android.R.drawable.marker_tap;mapView.createMarker({iconPath:"R/assets/Resources/images/marker_tap.png",latlng:[e.lat,e.lng]})}),mapView.addLayer({name:"osm",path:"osmdroid/maps/nz/nz.map"});var actionBar=win.activity.actionBar;"undefined"!=typeof actionBar&&actionBar.hide();